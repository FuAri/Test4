<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Mapper.DeptMapper">
    <resultMap id="deptMap" type="dept">
        <id property="deptId" column="dept_id"></id>
        <result property="deptname" column="dept_name"></result>
    </resultMap>

    <select id="findDeptById" resultType="dept" parameterType="Integer" resultMap="deptMap">
        select * from tb_dept where dept_id = #{id}
    </select>

    <select id="findDeptByName" resultType="dept" parameterType="String" resultMap="deptMap">
    <!-- select * from tb_dept where dept_name like '%${value}%'
    防止sql注入问题，用#{value }-->
    select * from tb_dept where dept_name like concat('%',#{deptname},'%')
</select>
<!--    添加一个系-->
    <insert id="addDept" parameterType="dept">
        insert into tb_dept (dept_id,dept_name) values (#{deptId},#{deptname})
    </insert>
    <!-- 支持自动生成主键
    <insert id="addCustomer" parameterType="com.sise.po.Customer"
            keyProperty="id" useGeneratedKeys="true">
		insert into t_customer(username,jobs,phone)
		values(#{username},#{jobs},#{phone})
	</insert>
        对于不支持自动生成主键的数据库，或取消自主增长规则的数据库可以自定义主键生成规则
        <insert id="insertCustomer" parameterType="com.sise.po.Customer">
            <selectKey keyProperty="id" resultType="Integer" order="BEFORE">
            select if(max(id) is null, 1, max(id) +1) as newId from t_customer
            </selectKey>
            insert into t_customer(id,username,jobs,phone)
            values(#{id},#{username},#{jobs},#{phone})
        </insert> -->

    <update id="updateDept" parameterType="dept">
        update tb_dept set dept_name=#{deptname} where dept_id=#{deptId}
    </update>
    <delete id="deleteDept" parameterType="Integer">
        delete  from tb_dept where dept_id=#{deptId}
    </delete>
</mapper>

